<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Finds the RRA (round robin array) that best matches the consolidation function and the step and imports all values (from all data stores) in that RRA that are between timestamp start and end. Note that start is not included in the result.
Returns a data.frame object having the timestamp and the data stores as columns. The data store names are retrieved from the RRD file and set as the corresponding column names. The timestamps are also used as row names."><title>Imports the RRA data from an RRD database — read_rra • rrd</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Imports the RRA data from an RRD database — read_rra"><meta property="og:description" content="Finds the RRA (round robin array) that best matches the consolidation function and the step and imports all values (from all data stores) in that RRA that are between timestamp start and end. Note that start is not included in the result.
Returns a data.frame object having the timestamp and the data stores as columns. The data store names are retrieved from the RRD file and set as the corresponding column names. The timestamps are also used as row names."><meta property="og:image" content="https://andrie.github.io/rrd/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rrd</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/andrie/rrd/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Imports the RRA data from an RRD database</h1>
      <small class="dont-index">Source: <a href="https://github.com/andrie/rrd/blob/HEAD/R/read_rrd.R" class="external-link"><code>R/read_rrd.R</code></a></small>
      <div class="d-none name"><code>read_rra.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Finds the RRA (round robin array) that best matches the <code>consolidation function</code> and the <code>step</code> and imports all values (from all data stores) in that RRA that are between timestamp <code>start</code> and <code>end</code>. Note that <code>start</code> is not included in the result.</p>
<p>Returns a <code>data.frame</code> object having the <code>timestamp</code> and the data stores as columns. The data store names are retrieved from the RRD file and set as the corresponding column names. The timestamps are also used as row names.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_rra</span><span class="op">(</span><span class="va">filename</span>, <span class="va">cf</span>, <span class="va">step</span>, <span class="va">n_steps</span>, <span class="va">start</span>, end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>filename</dt>
<dd><p>File name</p></dd>


<dt>cf</dt>
<dd><p>The consolidation function that is applied to the data you want to fetch. Must be one of <code>c("AVERAGE", "MIN", "MAX", "LAST")</code></p></dd>


<dt>step</dt>
<dd><p>step</p></dd>


<dt>n_steps</dt>
<dd><p>number of steps to return</p></dd>


<dt>start</dt>
<dd><p>start time</p></dd>


<dt>end</dt>
<dd><p>end time, defaults to the current system time</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>filename</code>, <code>cf</code> (consolidation function) and <code>step</code> arguments uniquely identify an RRA array in the RRD file.</p>
<p>The arguments <code>start</code> and <code>end</code> define the time-slice to be retrieved. Note that <code>start</code> is not included in the result. Refer to the documentation for <a href="https://oss.oetiker.ch/rrdtool/doc/rrdfetch.en.html" class="external-link">rrdfetch</a> for more information.</p>
<p>The returned <code>data.frame</code> has the <code>timestamp</code> and the data stores as separate columns. The names of the data sources are extracted from the RRD file and set as column names. The timestamps are also used as row names.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other rrd functions: 
<code><a href="describe_rrd.html">describe_rrd</a>()</code>,
<code><a href="read_rrd.html">read_rrd</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">rrd_cpu_0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/cpu-0.rrd"</span>, package <span class="op">=</span> <span class="st">"rrd"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note that the default end time is the current time (Sys.time())</span></span></span>
<span class="r-in"><span><span class="co"># However, since the sample data is historic, specify the end time</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2018-05-01"</span><span class="op">)</span> <span class="co"># timestamp with data in example</span></span></span>
<span class="r-in"><span><span class="va">end_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2018-05-02"</span><span class="op">)</span>   <span class="co"># timestamp with data in example</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># read archive by specifying start time</span></span></span>
<span class="r-in"><span><span class="va">avg_60</span> <span class="op">&lt;-</span> <span class="fu">read_rra</span><span class="op">(</span><span class="va">rrd_cpu_0</span>, cf <span class="op">=</span> <span class="st">"AVERAGE"</span>, step <span class="op">=</span> <span class="fl">60L</span>, </span></span>
<span class="r-in"><span>                     start <span class="op">=</span> <span class="va">start_time</span>, </span></span>
<span class="r-in"><span>                     end <span class="op">=</span> <span class="va">end_time</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">avg_60</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "timestamp" "user"      "sys"       "nice"      "idle"      "wait"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7] "irq"       "softirq"   "stolen"   </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">avg_60</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   timestamp              user      sys  nice  idle  wait   irq softirq   stolen</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2018-05-01 <span style="color: #949494;">00:01:00</span> 0.004<span style="text-decoration: underline;">58</span> 0.002<span style="text-decoration: underline;">01</span>      0 0.992     0     0       0 0.001<span style="text-decoration: underline;">44</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2018-05-01 <span style="color: #949494;">00:02:00</span> 0.002<span style="text-decoration: underline;">58</span> 0.000<span style="text-decoration: underline;">570</span>     0 0.996     0     0       0 0.000<span style="text-decoration: underline;">570</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 2018-05-01 <span style="color: #949494;">00:03:00</span> 0.006<span style="text-decoration: underline;">33</span> 0.001<span style="text-decoration: underline;">44</span>      0 0.992     0     0       0 0       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 2018-05-01 <span style="color: #949494;">00:04:00</span> 0.005<span style="text-decoration: underline;">15</span> 0.002<span style="text-decoration: underline;">01</span>      0 0.991     0     0       0 0.001<span style="text-decoration: underline;">44</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 2018-05-01 <span style="color: #949494;">00:05:00</span> 0.004<span style="text-decoration: underline;">02</span> 0.000<span style="text-decoration: underline;">569</span>     0 0.995     0     0       0 0.000<span style="text-decoration: underline;">569</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> 2018-05-01 <span style="color: #949494;">00:06:00</span> 0.006<span style="text-decoration: underline;">89</span> 0.001<span style="text-decoration: underline;">44</span>      0 0.992     0     0       0 0       </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">avg_60</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   timestamp              user      sys  nice  idle  wait   irq softirq stolen</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2018-05-01 <span style="color: #949494;">23:55:00</span> 0.005<span style="text-decoration: underline;">46</span> 0.002<span style="text-decoration: underline;">01</span>      0 0.993     0     0       0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2018-05-01 <span style="color: #949494;">23:56:00</span> 0.004<span style="text-decoration: underline;">58</span> 0.002<span style="text-decoration: underline;">01</span>      0 0.993     0     0       0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 2018-05-01 <span style="color: #949494;">23:57:00</span> 0.002<span style="text-decoration: underline;">58</span> 0.000<span style="text-decoration: underline;">568</span>     0 0.997     0     0       0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 2018-05-01 <span style="color: #949494;">23:58:00</span> 0.006<span style="text-decoration: underline;">33</span> 0            0 0.994     0     0       0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 2018-05-01 <span style="color: #949494;">23:59:00</span> 0.008<span style="text-decoration: underline;">02</span> 0.001<span style="text-decoration: underline;">44</span>      0 0.991     0     0       0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> 2018-05-02 <span style="color: #949494;">00:00:00</span> 0.005<span style="text-decoration: underline;">15</span> 0.003<span style="text-decoration: underline;">45</span>      0 0.991     0     0       0      0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># read archive by specifying number of rows to retrieve</span></span></span>
<span class="r-in"><span><span class="va">avg_60</span> <span class="op">&lt;-</span> <span class="fu">read_rra</span><span class="op">(</span><span class="va">rrd_cpu_0</span>, cf <span class="op">=</span> <span class="st">"AVERAGE"</span>, step <span class="op">=</span> <span class="fl">60L</span>, </span></span>
<span class="r-in"><span>                   n_steps <span class="op">=</span> <span class="fl">5</span>, </span></span>
<span class="r-in"><span>                   end <span class="op">=</span> <span class="va">end_time</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">avg_60</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "timestamp" "user"      "sys"       "nice"      "idle"      "wait"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7] "irq"       "softirq"   "stolen"   </span>
<span class="r-in"><span><span class="va">avg_60</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   timestamp              user      sys  nice  idle  wait   irq softirq stolen</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2018-05-01 <span style="color: #949494;">23:56:00</span> 0.004<span style="text-decoration: underline;">58</span> 0.002<span style="text-decoration: underline;">01</span>      0 0.993     0     0       0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2018-05-01 <span style="color: #949494;">23:57:00</span> 0.002<span style="text-decoration: underline;">58</span> 0.000<span style="text-decoration: underline;">568</span>     0 0.997     0     0       0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 2018-05-01 <span style="color: #949494;">23:58:00</span> 0.006<span style="text-decoration: underline;">33</span> 0            0 0.994     0     0       0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 2018-05-01 <span style="color: #949494;">23:59:00</span> 0.008<span style="text-decoration: underline;">02</span> 0.001<span style="text-decoration: underline;">44</span>      0 0.991     0     0       0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 2018-05-02 <span style="color: #949494;">00:00:00</span> 0.005<span style="text-decoration: underline;">15</span> 0.003<span style="text-decoration: underline;">45</span>      0 0.991     0     0       0      0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Andrie de Vries, Plamen Dimitrov.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

